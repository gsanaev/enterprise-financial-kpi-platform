# Enterprise Financial KPI Platform

## Overview
This project implements an end-to-end financial analytics platform using synthetic data, a DuckDB data warehouse, SQL transformation layers, and Power BI dashboards. It simulates realistic corporate finance workflows including revenue modeling, cost allocation, profitability analysis, and KPI reporting.

## Features
- Synthetic enterprise dataset: customers, products, accounts, cost centers, transactions, financial postings.
- DuckDB-based data warehouse with dimensional modeling.
- SQL transformation layer (star schema, views, KPI marts).
- Cost allocation model (OPEX → product profitability).
- KPI layer including revenue, margin, CLV, churn, and customer activity.
- Power BI dashboard for executive-level insights.

## Repository Structure
```
enterprise-financial-kpi-platform/
├── data/
│   └── raw/                       # Synthetic CSV files generated by Python
├── dashboards/
│   └── enterprise_financial_kpis.pbix
├── sql/
│   ├── 01_create_schema.sql
│   ├── 02_load_staging_data.sql
│   ├── 03_transform_core.sql
│   ├── 04_cost_allocation.sql
│   └── 05_kpi_views.sql
├── src/
│   └── enterprise_financial_kpi_platform/
│       ├── generate_synthetic_data.py
│       ├── utils.py
│       └── validate_kpis.py
├── notebooks/
│   └── 01_synthetic_data_design.ipynb
├── main.py
└── README.md
```

## Data Warehouse Workflow

### 1. Synthetic Data Generation
Run:
```
uv run python -m src.enterprise_financial_kpi_platform.generate_synthetic_data
```
Outputs CSVs to `data/raw/`.

### 2. DuckDB Schema Creation
```
duckdb finance.duckdb < sql/01_create_schema.sql
```

### 3. Load Staging Data
```
duckdb finance.duckdb < sql/02_load_staging_data.sql
```

### 4. Core Transform Layer
Creates analytic views for revenue, COGS, margin, customer profitability.
```
duckdb finance.duckdb < sql/03_transform_core.sql
```

### 5. Cost Allocation Layer
Allocates OPEX to products based on revenue share.
```
duckdb finance.duckdb < sql/04_cost_allocation.sql
```

### 6. KPI Layer
Creates YTD, QTD, MTD, LTM financial KPIs.
```
duckdb finance.duckdb < sql/05_kpi_views.sql
```

## KPIs Included
- Revenue / COGS / Gross Margin
- Operating Profit
- Product profitability
- OPEX allocation
- Customer Lifetime Revenue
- Customer Activity
- Segmentation summaries
- YTD / QTD / MTD / LTM KPIs

## Dashboard
Power BI dashboard included:  
`dashboards/enterprise_financial_kpis.pbix`

## How to Rebuild the Warehouse
```
rm finance.duckdb
duckdb finance.duckdb < sql/01_create_schema.sql
duckdb finance.duckdb < sql/02_load_staging_data.sql
duckdb finance.duckdb < sql/03_transform_core.sql
duckdb finance.duckdb < sql/04_cost_allocation.sql
duckdb finance.duckdb < sql/05_kpi_views.sql
```

## Requirements
- Python 3.12+
- uv package manager
- DuckDB CLI
- Power BI / Power BI Desktop

## About
This project demonstrates enterprise-grade financial analytics, modern data warehousing practices, synthetic data engineering, and business KPI modeling.
